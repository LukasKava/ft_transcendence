worker_processes auto;

events {
    worker_connections 1024;
}

http {
	server{
	    # listen 80;
		server_name localhost;

		# Define the root directory where your static files are located
		root /usr/share/nginx/html;

		# Default location block
		location / {
			# Serve the index file or fallback to a custom 404 page
			try_files $uri $uri/ =404;
		}

		# Optionally, add a location block for specific paths (e.g., for serving static assets)
		location /static/ {
			alias /usr/share/nginx/html/static/;
			# Ensure proper MIME types for files in this directory
			add_header Cache-Control "public, max-age=31536000";
		}
			
		location /api/ {
			proxy_pass http://localhost:5000;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header X-Forwarded-Proto $scheme;
		}
	}
}